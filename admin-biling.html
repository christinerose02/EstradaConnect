{% load static %}


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estrada Personnel Portal</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="admin-billing.css">
</head>
<body>

<div class="auth-card">
  <h3 id="form-title">Login as Estrada Personnel</h3>
  <div id="message"></div>

  <!-- LOGIN FIELDS -->
  <div id="loginFields">
    <div class="input-group">
      <input type="text" id="loginUsername" placeholder=" " required>
      <label>Username</label>
    </div>

    <div class="input-group">
      <input type="password" id="loginPassword" placeholder=" " required>
      <label>Password</label>
    </div>
  </div>

  <!-- SIGNUP FIELDS -->
  <div id="signupFields" style="display:none;">
    <div class="input-group">
      <input type="text" id="firstName" placeholder=" ">
      <label>First Name</label>
    </div>

    <div class="input-group">
      <input type="text" id="lastName" placeholder=" ">
      <label>Last Name</label>
    </div>

    <div class="input-group">
      <input type="password" id="createPassword" placeholder=" ">
      <label>Create Password</label>
    </div>

    <div class="input-group">
      <input type="password" id="confirmPassword" placeholder=" ">
      <label>Confirm Password</label>
    </div>
  </div>

  <button id="submitBtn">Login</button>

  <div class="auth-footer">
    <span id="toggleText">
      Don’t have an account?
      <a href="#" id="toggleForm">Sign Up</a>
    </span>
  </div>
</div>

<script>
let isLogin = true;
const users = [];

const formTitle = document.getElementById('form-title');
const submitBtn = document.getElementById('submitBtn');
const message = document.getElementById('message');
const toggleText = document.getElementById('toggleText');
const loginFields = document.getElementById('loginFields');
const signupFields = document.getElementById('signupFields');

document.addEventListener("click", function(e) {
  if (e.target && e.target.id === "toggleForm") {
    e.preventDefault();
    toggleForm();
  }
});

function toggleForm() {
  isLogin = !isLogin;

  if (isLogin) {
    formTitle.textContent = "Login as Estrada Personnel";
    submitBtn.textContent = "Login";
    loginFields.style.display = "block";
    signupFields.style.display = "none";
    toggleText.innerHTML =
      'Don’t have an account? <a href="#" id="toggleForm">Sign Up</a>';
  } else {
    formTitle.textContent = "Sign Up as Estrada Personnel";
    submitBtn.textContent = "Create Account";
    loginFields.style.display = "none";
    signupFields.style.display = "block";
    toggleText.innerHTML =
      'Already have an account? <a href="#" id="toggleForm">Login</a>';
  }

  message.textContent = "";
}

submitBtn.addEventListener('click', () => {

  if (isLogin) {
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value.trim();

    if (!username || !password) {
      message.style.color = "red";
      message.textContent = "Please fill all fields.";
      return;
    }

    const user = users.find(u => u.username === username && u.password === password);

    if (user) {
      message.style.color = "green";
      message.textContent = `Welcome back, ${user.firstName}!`;
    } else {
      message.style.color = "red";
      message.textContent = "Invalid credentials.";
    }

  } else {
    const firstName = document.getElementById('firstName').value.trim();
    const lastName = document.getElementById('lastName').value.trim();
    const createPassword = document.getElementById('createPassword').value.trim();
    const confirmPassword = document.getElementById('confirmPassword').value.trim();

    if (!firstName || !lastName || !createPassword || !confirmPassword) {
      message.style.color = "red";
      message.textContent = "Please fill all fields.";
      return;
    }

    if (createPassword !== confirmPassword) {
      message.style.color = "red";
      message.textContent = "Passwords do not match.";
      return;
    }

    const username = firstName.toLowerCase() + "." + lastName.toLowerCase();

    users.push({
      username,
      firstName,
      lastName,
      password: createPassword
    });

    message.style.color = "green";
    message.textContent = "Account created successfully! Your username is: " + username;

    setTimeout(toggleForm, 2000);
  }
});
</script>

</body>
</html>
